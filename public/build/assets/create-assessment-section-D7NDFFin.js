import{r as x,j as e,s as v}from"./app-Df0i1oaT.js";import{R as I}from"./quill.snow-D5tdvq9B.js";import{a as M}from"./lesson-thunk-BjNY4ofq.js";import{I as E}from"./InputLabel-DzmzLOga.js";import{g as A}from"./booklet-thunk-BCV8J0ES.js";import{s as B}from"./DefaultPropsProvider-BoBJFB7l.js";import{B as m}from"./Button-qg2CruYy.js";import{M as D}from"./Modal-Cj7-v9tw.js";import{B as Q}from"./Box-DupkOPz1.js";import{F as j,a as b}from"./FormLabel-DJq8parL.js";import{S as O,F as g,T as f}from"./TextField-BXO2VhMV.js";import{M as r}from"./MenuItem-DwigJLSX.js";import{C as R}from"./Check-CDyjQpbZ.js";import{C as L}from"./CloudUpload-DDFRsqxE.js";import{R as _,F as c,a as d}from"./RadioGroup-B3EXKyWX.js";import"./lesson-service-uhxV0jGe.js";import"./examinations-service-d8eqe8ln.js";import"./module-service-Ddpsuhgr.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-By2a__em.js";import"./TransitionGroupContext-Q3-u91IG.js";import"./ownerWindow-HkKU3E4x.js";import"./ownerDocument-DW-IO8s5.js";import"./resolveComponentProps-4UMnOK1Q.js";import"./useSlot-CVUM7tnc.js";import"./useTheme-Std7-Td-.js";import"./utils-BS8fzq39.js";import"./Portal-Cj2nRuYc.js";import"./extendSxProp-D8cfJnOK.js";import"./utils-DS7DDfi8.js";import"./isMuiElement-D_DtsRYz.js";import"./useId-DQIkgqz7.js";import"./react-is.production.min-DUDD-a5e.js";import"./index-53G4KjS8.js";import"./Popover-Cz70x5jn.js";import"./isHostComponent-DVu5iVWx.js";import"./Paper-DsKI8kWK.js";import"./debounce-Be36O1Ab.js";import"./Grow-Bm-RBavi.js";import"./useSlotProps-D6pd7ljO.js";import"./useControlled-DNzKU3nZ.js";import"./createSvgIcon-Ds9GQ3vC.js";import"./InputBase-B1QXfQkp.js";import"./index-C1zYL102.js";import"./listItemTextClasses-CRi0EJvS.js";import"./Typography-kO_jI44Q.js";const U={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1e3,bgcolor:"background.paper",boxShadow:24,p:4};function Ae({datas:k}){var w;const[q,h]=x.useState(!1),[a,C]=x.useState({}),[N,u]=x.useState(!1),[t,i]=x.useState({exam_type:"",direction:"",file:"",questions:[{question:"",answer_key:""}]}),y=window.location.pathname.split("/")[3],F=()=>h(!0),T=()=>h(!1),$=B("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});async function S(n){try{u(!0);const s=new FormData;s.append("lesson_id",k.id),s.append("module_id",y),s.append("questions",JSON.stringify(t.questions)),s.append("file",t.file),s.append("direction",t.direction),s.append("exam_type",t.exam_type),s.append("type","assessment");const l=await v.dispatch(M(s));l.status==200?(v.dispatch(A(y)),u(!1),h(!1),i({exam_type:"",direction:"",file:"",questions:[{question:"",answer_key:"",file:""}]})):(u(!1),C(l.response.data.errors)),console.log("datass",t)}catch{u(!1)}}const p=(n,s,l)=>{const o=[...t.questions];o[n][s]=l,i({...t,questions:o})};return console.log("da",t),e.jsxs("div",{children:[e.jsx(m,{variant:"contained",color:"warning",onClick:F,children:"CREATE ASSESSMENT"}),e.jsx(D,{open:q,onClose:T,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx(Q,{sx:U,children:e.jsxs("div",{className:"h-[88vh] overflow-auto",children:[e.jsx("div",{className:"flex items-center justify-center text-3xl font-black",children:"Assessment"}),e.jsxs("div",{className:"overflow  w-full flex gap-4 flex-col",children:[e.jsxs(j,{fullWidth:!0,error:!!(a!=null&&a.exam_type),children:[e.jsx(E,{id:"exam-type-select-label",children:"Exam Type"}),e.jsxs(O,{labelId:"exam-type-select-label",id:"exam-type-select",name:"exam_type",label:"Exam Type",value:t.exam_type??"",onChange:n=>i({...t,[n.target.name]:n.target.value}),children:[e.jsx(r,{value:"",disabled:!0,children:"Select Exam Type"}),e.jsx(r,{value:"Fill In The Blank",children:"Fill In The Blank"}),e.jsx(r,{value:"Multiple Choice",children:"Multiple Choice"}),e.jsx(r,{value:"Matching",children:"Matching"}),e.jsx(r,{value:"Identification",children:"Identification"}),e.jsx(r,{value:"True Or False",children:"True Or False"})]}),(a==null?void 0:a.type)&&e.jsx(g,{children:a.type})]}),e.jsxs(m,{component:"label",role:void 0,variant:"contained",startIcon:t!=null&&t.file?e.jsxs(e.Fragment,{children:[e.jsx(R,{}),"UPLOADED"]}):e.jsx(L,{}),children:[t!=null&&t.file?(w=t==null?void 0:t.file)==null?void 0:w.name:"Upload files",e.jsx($,{name:"file",type:"file",onChange:n=>i({...t,[n.target.name]:n.target.files[0]}),accept:"image/*"})]}),e.jsxs("div",{className:"bg-white ",children:[(a==null?void 0:a.direction)&&e.jsx("div",{className:"text-red-600",children:a==null?void 0:a.direction}),e.jsx("div",{className:"text-black p-3 font-black",children:"Direction"}),e.jsx(I,{theme:"snow",className:"text-black  h-52",onChange:n=>i({...t,direction:n})})]}),e.jsx("div",{className:"mt-10"}),e.jsx("div",{className:"flex w-full items-center justify-end",children:t.exam_type&&e.jsx(m,{className:"w-36",variant:"contained",autoFocus:!0,onClick:()=>i({...t,questions:[...t.questions,{question:"",answer:"",answer_key:""}]}),children:"add fields"})}),t.questions.map((n,s)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 justify-end mt-2",children:s!=0&&e.jsx(m,{variant:"outlined",color:"error",onClick:()=>{const l=[...t.questions];l.splice(s,1),i({...t,questions:l})},children:"Delete"})}),t.exam_type==="True Or False"&&e.jsx("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx(f,{multiline:!0,rows:3,onChange:l=>{const o=[...t.questions];o[s].question=l.target.value,i({...t,questions:o})},error:!!(a!=null&&a.question),helperText:(a==null?void 0:a.question)??"",value:n.question,name:`question-${s}`,type:"text",label:`Question ${s+1}`,variant:"outlined",className:"w-full"}),e.jsxs(j,{children:[e.jsx(b,{id:`answer-key-label-${s}`,children:"Answer Key"}),e.jsxs(_,{row:!0,value:n.answer_key,onChange:l=>{const o=[...t.questions];o[s].answer_key=l.target.value,i({...t,questions:o})},"aria-labelledby":`answer-key-label-${s}`,name:`answer_key-${s}`,children:[e.jsx(c,{value:"true",control:e.jsx(d,{}),label:"True"}),e.jsx(c,{value:"false",control:e.jsx(d,{}),label:"False"})]})]})]})},s),(t.exam_type=="Fill In The Blank"||t.exam_type=="Matching"||t.exam_type=="Identification")&&e.jsx("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:e.jsxs("div",{className:"flex flex-row gap-4 w-full border-b ",children:[e.jsx(f,{multiline:!0,rows:2,onChange:l=>p(s,"question",l.target.value),value:n.question,label:`Question ${s+1}`,variant:"outlined",className:"w-full"}),e.jsx(f,{multiline:!0,rows:2,onChange:l=>p(s,"answer_key",l.target.value),value:n.answer_key,label:`Answer Key ${s+1}`,variant:"outlined",className:"w-full"})]},s)}),t.exam_type=="Multiple Choice"&&e.jsxs("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:[e.jsx("div",{className:"flex items-center justify-between w-full",children:e.jsxs(j,{error:!!(a!=null&&a[`answer_key-${s}`]),children:[e.jsxs(b,{id:`answer-key-${s}`,children:["Answer Key ",s+1]}),e.jsxs(_,{row:!0,"aria-labelledby":`answer-key-${s}`,name:`answer_key-${s}`,value:n.answer_key,onChange:l=>p(s,"answer_key",l.target.value),children:[e.jsx(c,{value:"A",control:e.jsx(d,{}),label:"A"}),e.jsx(c,{value:"B",control:e.jsx(d,{}),label:"B"}),e.jsx(c,{value:"C",control:e.jsx(d,{}),label:"C"}),e.jsx(c,{value:"D",control:e.jsx(d,{}),label:"D"})]}),(a==null?void 0:a[`answer_key-${s}`])&&e.jsx(g,{children:a[`answer_key-${s}`]})]})}),e.jsx(f,{multiline:!0,rows:3,value:n.question,name:`question-${s}`,type:"text",label:`Question ${s+1}`,variant:"outlined",className:"w-full",error:!!(a!=null&&a[`question-${s}`]),helperText:(a==null?void 0:a[`question-${s}`])??"",onChange:l=>p(s,"question",l.target.value)})]},s)]}))]}),e.jsx("div",{className:"mt-5",children:e.jsx(m,{className:"w-full  ",disabled:N,variant:"contained",autoFocus:!0,onClick:S,children:"SUBMIT"})})]})})})]})}export{Ae as default};
