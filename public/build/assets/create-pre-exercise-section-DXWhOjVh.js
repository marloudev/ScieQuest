import{r as x,j as e,s as $}from"./app-Zxd9oxSa.js";import{R as I}from"./index-CuUnljQo.js";/* empty css                   */import{a as S}from"./lesson-thunk-CiGaiWeL.js";import{I as M}from"./InputLabel-nRms1tmj.js";import{s as R}from"./DefaultPropsProvider-CetTalod.js";import{B as u}from"./Button-DtfagjAK.js";import{M as B}from"./Modal-tmvYIwvH.js";import{B as D}from"./Box-BXUoZXXP.js";import{F as j,a as w}from"./FormLabel-BKH10ddk.js";import{S as Q,F as v,T as f}from"./TextField-B09S0bUk.js";import{M as r}from"./MenuItem-CtE6orUE.js";import{C as A}from"./Check-B3X_nHA4.js";import{C as O}from"./CloudUpload-vNu4HUJ1.js";import{R as b,F as c,a as d}from"./RadioGroup-DofIFc5i.js";import"./booklet-slice-BbmaNUWB.js";import"./lesson-service-DQ0KS7Vy.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-DPwck9L4.js";import"./emotion-react.browser.esm-D6ncO4Ys.js";import"./TransitionGroupContext-CnBnmegf.js";import"./useId-BuY5a30L.js";import"./CircularProgress-CPVnkrsC.js";import"./ownerWindow-HkKU3E4x.js";import"./ownerDocument-DW-IO8s5.js";import"./resolveComponentProps-CulCwgLX.js";import"./useSlot-ClyDGL4g.js";import"./useTheme-CPWSaYRF.js";import"./utils-DnUL-ntE.js";import"./Portal-_2PPGR3K.js";import"./extendSxProp-CEDDqhal.js";import"./utils-BClr3tlX.js";import"./isMuiElement-SKUBym5B.js";import"./index-Cb4P_PNE.js";import"./Popover-BjLRE2Gx.js";import"./isHostComponent-DVu5iVWx.js";import"./Paper-B9ZaVdmj.js";import"./debounce-Be36O1Ab.js";import"./Grow-tb9ZrQJN.js";import"./useSlotProps-C0h0GQAo.js";import"./useControlled-CRO67NOe.js";import"./createSvgIcon-CaXaAUFy.js";import"./InputBase-8W2u62eb.js";import"./index-DQ6pjLev.js";import"./listItemTextClasses-BXZjql0w.js";import"./Typography-Dzms8R8X.js";const L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1e3,bgcolor:"background.paper",boxShadow:24,p:4};function Me({datas:g}){var y;const[_,h]=x.useState(!1),[a,k]=x.useState({}),[q,m]=x.useState(!1),[s,i]=x.useState({exam_type:"",direction:"",file:"",questions:[{question:"",answer_key:""}]}),C=window.location.pathname.split("/")[3],N=()=>h(!0),F=()=>h(!1),E=R("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});async function T(n){try{m(!0);const t=new FormData;t.append("lesson_id",g.id),t.append("module_id",C),t.append("questions",JSON.stringify(s.questions)),t.append("file",s.file),t.append("direction",s.direction),t.append("exam_type",s.exam_type),t.append("type","pre-exercise");const l=await $.dispatch(S(t));l.status==200?(m(!1),h(!1),i({exam_type:"",direction:"",file:"",questions:[{question:"",answer_key:"",file:""}]})):(m(!1),k(l.response.data.errors)),console.log("datass",s)}catch{m(!1)}}const p=(n,t,l)=>{const o=[...s.questions];o[n][t]=l,i({...s,questions:o})};return console.log("da",s),e.jsxs("div",{children:[e.jsx(u,{variant:"contained",onClick:N,children:"CREATE PRE-EXERCISE"}),e.jsx(B,{open:_,onClose:F,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx(D,{sx:L,children:e.jsxs("div",{className:"h-[88vh] overflow-auto",children:[e.jsx("div",{className:"flex items-center justify-center text-3xl font-black",children:"PRE-EXERCISE"}),e.jsxs("div",{className:"overflow  w-full flex gap-4 flex-col",children:[e.jsxs(j,{fullWidth:!0,error:!!(a!=null&&a.exam_type),children:[e.jsx(M,{id:"exam-type-select-label",children:"Exam Type"}),e.jsxs(Q,{labelId:"exam-type-select-label",id:"exam-type-select",name:"exam_type",label:"Exam Type",value:s.exam_type??"",onChange:n=>i({...s,[n.target.name]:n.target.value}),children:[e.jsx(r,{value:"",disabled:!0,children:"Select Exam Type"}),e.jsx(r,{value:"Fill In The Blank",children:"Fill In The Blank"}),e.jsx(r,{value:"Multiple Choice",children:"Multiple Choice"}),e.jsx(r,{value:"Matching",children:"Matching"}),e.jsx(r,{value:"Identification",children:"Identification"}),e.jsx(r,{value:"True Or False",children:"True Or False"})]}),(a==null?void 0:a.type)&&e.jsx(v,{children:a.type})]}),e.jsxs(u,{component:"label",role:void 0,variant:"contained",startIcon:s!=null&&s.file?e.jsxs(e.Fragment,{children:[e.jsx(A,{}),"UPLOADED"]}):e.jsx(O,{}),children:[s!=null&&s.file?(y=s==null?void 0:s.file)==null?void 0:y.name:"Upload files",e.jsx(E,{name:"file",type:"file",onChange:n=>i({...s,[n.target.name]:n.target.files[0]}),accept:"image/*"})]}),e.jsxs("div",{className:"bg-white ",children:[(a==null?void 0:a.direction)&&e.jsx("div",{className:"text-red-600",children:a==null?void 0:a.direction}),e.jsx("div",{className:"text-black p-3 font-black",children:"Direction"}),e.jsx(I,{theme:"snow",className:"text-black  h-52",onChange:n=>i({...s,direction:n})})]}),e.jsx("div",{className:"mt-10"}),e.jsx("div",{className:"flex w-full items-center justify-end",children:s.exam_type&&e.jsx(u,{className:"w-36",variant:"contained",autoFocus:!0,onClick:()=>i({...s,questions:[...s.questions,{question:"",answer:"",answer_key:""}]}),children:"add fields"})}),s.questions.map((n,t)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 justify-end mt-2",children:t!=0&&e.jsx(u,{variant:"outlined",color:"error",onClick:()=>{const l=[...s.questions];l.splice(t,1),i({...s,questions:l})},children:"Delete"})}),s.exam_type==="True Or False"&&e.jsx("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx(f,{multiline:!0,rows:3,onChange:l=>{const o=[...s.questions];o[t].question=l.target.value,i({...s,questions:o})},error:!!(a!=null&&a.question),helperText:(a==null?void 0:a.question)??"",value:n.question,name:`question-${t}`,type:"text",label:`Question ${t+1}`,variant:"outlined",className:"w-full"}),e.jsxs(j,{children:[e.jsx(w,{id:`answer-key-label-${t}`,children:"Answer Key"}),e.jsxs(b,{row:!0,value:n.answer_key,onChange:l=>{const o=[...s.questions];o[t].answer_key=l.target.value,i({...s,questions:o})},"aria-labelledby":`answer-key-label-${t}`,name:`answer_key-${t}`,children:[e.jsx(c,{value:"true",control:e.jsx(d,{}),label:"True"}),e.jsx(c,{value:"false",control:e.jsx(d,{}),label:"False"})]})]})]})},t),(s.exam_type=="Fill In The Blank"||s.exam_type=="Matching"||s.exam_type=="Identification")&&e.jsx("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:e.jsxs("div",{className:"flex flex-row gap-4 w-full border-b ",children:[e.jsx(f,{multiline:!0,rows:2,onChange:l=>p(t,"question",l.target.value),value:n.question,label:`Question ${t+1}`,variant:"outlined",className:"w-full"}),e.jsx(f,{multiline:!0,rows:2,onChange:l=>p(t,"answer_key",l.target.value),value:n.answer_key,label:`Answer Key ${t+1}`,variant:"outlined",className:"w-full"})]},t)}),s.exam_type=="Multiple Choice"&&e.jsxs("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:[e.jsx("div",{className:"flex items-center justify-between w-full",children:e.jsxs(j,{error:!!(a!=null&&a[`answer_key-${t}`]),children:[e.jsxs(w,{id:`answer-key-${t}`,children:["Answer Key ",t+1]}),e.jsxs(b,{row:!0,"aria-labelledby":`answer-key-${t}`,name:`answer_key-${t}`,value:n.answer_key,onChange:l=>p(t,"answer_key",l.target.value),children:[e.jsx(c,{value:"A",control:e.jsx(d,{}),label:"A"}),e.jsx(c,{value:"B",control:e.jsx(d,{}),label:"B"}),e.jsx(c,{value:"C",control:e.jsx(d,{}),label:"C"}),e.jsx(c,{value:"D",control:e.jsx(d,{}),label:"D"})]}),(a==null?void 0:a[`answer_key-${t}`])&&e.jsx(v,{children:a[`answer_key-${t}`]})]})}),e.jsx(f,{multiline:!0,rows:3,value:n.question,name:`question-${t}`,type:"text",label:`Question ${t+1}`,variant:"outlined",className:"w-full",error:!!(a!=null&&a[`question-${t}`]),helperText:(a==null?void 0:a[`question-${t}`])??"",onChange:l=>p(t,"question",l.target.value)})]},t)]}))]}),e.jsx("div",{className:"mt-5",children:e.jsx(u,{className:"w-full  ",disabled:q,variant:"contained",autoFocus:!0,onClick:T,children:"SUBMIT"})})]})})})]})}export{Me as default};
