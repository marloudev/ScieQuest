import{r as x,j as e,s as v}from"./app-BOStsiyL.js";import{R as I}from"./quill.snow-DnuyB3ZM.js";import{a as S}from"./lesson-thunk-REoj1Zkz.js";import{I as M}from"./InputLabel-Ci0BKOMC.js";import{g as R}from"./booklet-thunk-BlE-xSuI.js";import{s as B}from"./DefaultPropsProvider-Czk7uaN9.js";import{B as u}from"./Button-BsPfiNFM.js";import{M as D}from"./Modal-DmLMAh0d.js";import{B as Q}from"./Box-CqRYBbJP.js";import{F as j,a as b}from"./FormLabel-cYECU0RU.js";import{S as A,F as g,T as f}from"./TextField-DQX-6MJ0.js";import{M as r}from"./MenuItem-DIndghJ3.js";import{C as O}from"./Check-CDvuZWuS.js";import{C as L}from"./CloudUpload-CYgqiMX4.js";import{R as _,F as c,a as d}from"./RadioGroup-CBuwfQUF.js";import"./lesson-service-L0f9qrS_.js";import"./examinations-service-DMULXy6e.js";import"./module-service-D11TmvGE.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-C4AXjFw_.js";import"./TransitionGroupContext-BaUTapUi.js";import"./ownerWindow-HkKU3E4x.js";import"./ownerDocument-DW-IO8s5.js";import"./resolveComponentProps-DZO6rOdt.js";import"./useSlot-DYe-uWPu.js";import"./useTheme-DSltqoIk.js";import"./utils-CIo-JgV9.js";import"./Portal-CMel9LtN.js";import"./extendSxProp-7oYZh5Ca.js";import"./utils-KwX4Iu_t.js";import"./isMuiElement-ZZb8jAsL.js";import"./useId-DixNZwqD.js";import"./react-is.production.min-DUDD-a5e.js";import"./index-BxvVTCf-.js";import"./Popover-DCeVAQQE.js";import"./isHostComponent-DVu5iVWx.js";import"./Paper-BWwGTXIF.js";import"./debounce-Be36O1Ab.js";import"./Grow-B1gwSR5L.js";import"./useSlotProps-AOc8xloN.js";import"./useControlled-B8SjTZwR.js";import"./createSvgIcon-BtJgbZBj.js";import"./InputBase-jPlgM_0s.js";import"./index-DeZHkXCg.js";import"./listItemTextClasses-YkEwsmWw.js";import"./Typography-FP6N4BMV.js";const P={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1e3,bgcolor:"background.paper",boxShadow:24,p:4};function Re({datas:k}){var w;const[q,h]=x.useState(!1),[a,C]=x.useState({}),[N,m]=x.useState(!1),[s,i]=x.useState({exam_type:"",direction:"",file:"",questions:[{question:"",answer_key:""}]}),y=window.location.pathname.split("/")[3],F=()=>h(!0),E=()=>h(!1),T=B("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});async function $(n){try{m(!0);const t=new FormData;t.append("lesson_id",k.id),t.append("module_id",y),t.append("questions",JSON.stringify(s.questions)),t.append("file",s.file),t.append("direction",s.direction),t.append("exam_type",s.exam_type),t.append("type","pre-exercise");const l=await v.dispatch(S(t));l.status==200?(v.dispatch(R(y)),m(!1),h(!1),i({exam_type:"",direction:"",file:"",questions:[{question:"",answer_key:"",file:""}]})):(m(!1),C(l.response.data.errors)),console.log("datass",s)}catch{m(!1)}}const p=(n,t,l)=>{const o=[...s.questions];o[n][t]=l,i({...s,questions:o})};return console.log("da",s),e.jsxs("div",{children:[e.jsx(u,{variant:"contained",onClick:F,children:"CREATE PRE-EXERCISE"}),e.jsx(D,{open:q,onClose:E,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx(Q,{sx:P,children:e.jsxs("div",{className:"h-[88vh] overflow-auto",children:[e.jsx("div",{className:"flex items-center justify-center text-3xl font-black",children:"PRE-EXERCISE"}),e.jsxs("div",{className:"overflow  w-full flex gap-4 flex-col",children:[e.jsxs(j,{fullWidth:!0,error:!!(a!=null&&a.exam_type),children:[e.jsx(M,{id:"exam-type-select-label",children:"Exam Type"}),e.jsxs(A,{labelId:"exam-type-select-label",id:"exam-type-select",name:"exam_type",label:"Exam Type",value:s.exam_type??"",onChange:n=>i({...s,[n.target.name]:n.target.value}),children:[e.jsx(r,{value:"",disabled:!0,children:"Select Exam Type"}),e.jsx(r,{value:"Fill In The Blank",children:"Fill In The Blank"}),e.jsx(r,{value:"Multiple Choice",children:"Multiple Choice"}),e.jsx(r,{value:"Matching",children:"Matching"}),e.jsx(r,{value:"Identification",children:"Identification"}),e.jsx(r,{value:"True Or False",children:"True Or False"})]}),(a==null?void 0:a.type)&&e.jsx(g,{children:a.type})]}),e.jsxs(u,{component:"label",role:void 0,variant:"contained",startIcon:s!=null&&s.file?e.jsxs(e.Fragment,{children:[e.jsx(O,{}),"UPLOADED"]}):e.jsx(L,{}),children:[s!=null&&s.file?(w=s==null?void 0:s.file)==null?void 0:w.name:"Upload files",e.jsx(T,{name:"file",type:"file",onChange:n=>i({...s,[n.target.name]:n.target.files[0]}),accept:"image/*"})]}),e.jsxs("div",{className:"bg-white ",children:[(a==null?void 0:a.direction)&&e.jsx("div",{className:"text-red-600",children:a==null?void 0:a.direction}),e.jsx("div",{className:"text-black p-3 font-black",children:"Direction"}),e.jsx(I,{theme:"snow",className:"text-black  h-52",onChange:n=>i({...s,direction:n})})]}),e.jsx("div",{className:"mt-10"}),e.jsx("div",{className:"flex w-full items-center justify-end",children:s.exam_type&&e.jsx(u,{className:"w-36",variant:"contained",autoFocus:!0,onClick:()=>i({...s,questions:[...s.questions,{question:"",answer:"",answer_key:""}]}),children:"add fields"})}),s.questions.map((n,t)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 justify-end mt-2",children:t!=0&&e.jsx(u,{variant:"outlined",color:"error",onClick:()=>{const l=[...s.questions];l.splice(t,1),i({...s,questions:l})},children:"Delete"})}),s.exam_type==="True Or False"&&e.jsx("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx(f,{multiline:!0,rows:3,onChange:l=>{const o=[...s.questions];o[t].question=l.target.value,i({...s,questions:o})},error:!!(a!=null&&a.question),helperText:(a==null?void 0:a.question)??"",value:n.question,name:`question-${t}`,type:"text",label:`Question ${t+1}`,variant:"outlined",className:"w-full"}),e.jsxs(j,{children:[e.jsx(b,{id:`answer-key-label-${t}`,children:"Answer Key"}),e.jsxs(_,{row:!0,value:n.answer_key,onChange:l=>{const o=[...s.questions];o[t].answer_key=l.target.value,i({...s,questions:o})},"aria-labelledby":`answer-key-label-${t}`,name:`answer_key-${t}`,children:[e.jsx(c,{value:"true",control:e.jsx(d,{}),label:"True"}),e.jsx(c,{value:"false",control:e.jsx(d,{}),label:"False"})]})]})]})},t),(s.exam_type=="Fill In The Blank"||s.exam_type=="Matching"||s.exam_type=="Identification")&&e.jsx("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:e.jsxs("div",{className:"flex flex-row gap-4 w-full border-b ",children:[e.jsx(f,{multiline:!0,rows:2,onChange:l=>p(t,"question",l.target.value),value:n.question,label:`Question ${t+1}`,variant:"outlined",className:"w-full"}),e.jsx(f,{multiline:!0,rows:2,onChange:l=>p(t,"answer_key",l.target.value),value:n.answer_key,label:`Answer Key ${t+1}`,variant:"outlined",className:"w-full"})]},t)}),s.exam_type=="Multiple Choice"&&e.jsxs("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:[e.jsx("div",{className:"flex items-center justify-between w-full",children:e.jsxs(j,{error:!!(a!=null&&a[`answer_key-${t}`]),children:[e.jsxs(b,{id:`answer-key-${t}`,children:["Answer Key ",t+1]}),e.jsxs(_,{row:!0,"aria-labelledby":`answer-key-${t}`,name:`answer_key-${t}`,value:n.answer_key,onChange:l=>p(t,"answer_key",l.target.value),children:[e.jsx(c,{value:"A",control:e.jsx(d,{}),label:"A"}),e.jsx(c,{value:"B",control:e.jsx(d,{}),label:"B"}),e.jsx(c,{value:"C",control:e.jsx(d,{}),label:"C"}),e.jsx(c,{value:"D",control:e.jsx(d,{}),label:"D"})]}),(a==null?void 0:a[`answer_key-${t}`])&&e.jsx(g,{children:a[`answer_key-${t}`]})]})}),e.jsx(f,{multiline:!0,rows:3,value:n.question,name:`question-${t}`,type:"text",label:`Question ${t+1}`,variant:"outlined",className:"w-full",error:!!(a!=null&&a[`question-${t}`]),helperText:(a==null?void 0:a[`question-${t}`])??"",onChange:l=>p(t,"question",l.target.value)})]},t)]}))]}),e.jsx("div",{className:"mt-5",children:e.jsx(u,{className:"w-full  ",disabled:N,variant:"contained",autoFocus:!0,onClick:$,children:"SUBMIT"})})]})})})]})}export{Re as default};
