import{r as x,j as e,s as v}from"./app-Clu7KKhp.js";import{R as I}from"./index-CTion-4z.js";/* empty css                   */import{a as M}from"./lesson-thunk-tgXOvhLz.js";import{I as E}from"./InputLabel-Df9dFyad.js";import{g as A}from"./booklet-thunk-aK0m2kJ8.js";import{s as B}from"./DefaultPropsProvider-DK7iodv-.js";import{B as m}from"./Button-cyNFFQ4X.js";import{M as D}from"./Modal-BsV0Y-WE.js";import{B as Q}from"./Box-D1WfMM0D.js";import{F as j,a as b}from"./FormLabel-CtLOMJ3E.js";import{S as O,F as g,T as f}from"./TextField-B_KI96UZ.js";import{M as r}from"./MenuItem-ReLiqz6H.js";import{C as R}from"./Check-BmDXnamb.js";import{C as L}from"./CloudUpload-Dg5d9PUM.js";import{R as _,F as c,a as d}from"./RadioGroup-NDwE9h5s.js";import"./lesson-service-CpawL-mQ.js";import"./examinations-service-Blv1dcrd.js";import"./module-service-DipJnTYD.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-Det6oV2y.js";import"./emotion-react.browser.esm-BP1V1eHN.js";import"./TransitionGroupContext-CAluwC9r.js";import"./useId-BbKNCcKr.js";import"./CircularProgress-BJo1XUzI.js";import"./ownerWindow-HkKU3E4x.js";import"./ownerDocument-DW-IO8s5.js";import"./resolveComponentProps-D1jhqRXZ.js";import"./useSlot-TOnapPC9.js";import"./useTheme-26gqdFMf.js";import"./utils-DMQPu-ms.js";import"./Portal-COFl6NaV.js";import"./extendSxProp-6n_1V56B.js";import"./utils-DlWYB5wV.js";import"./isMuiElement-B66Iuct6.js";import"./index-2fKU81mP.js";import"./Popover-x_NtPZJq.js";import"./isHostComponent-DVu5iVWx.js";import"./Paper-CHv93Usp.js";import"./debounce-Be36O1Ab.js";import"./Grow-BCmVLsDr.js";import"./useSlotProps-CTfiBkSs.js";import"./useControlled-BRwMGh3H.js";import"./createSvgIcon-BnOdBYUv.js";import"./InputBase-DOJwFI9f.js";import"./index-aw7qWp_z.js";import"./listItemTextClasses-D0sob8n5.js";import"./Typography-Br1_bcmO.js";const U={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1e3,bgcolor:"background.paper",boxShadow:24,p:4};function De({datas:k}){var w;const[q,h]=x.useState(!1),[a,C]=x.useState({}),[N,u]=x.useState(!1),[s,i]=x.useState({exam_type:"",direction:"",file:"",questions:[{question:"",answer_key:""}]}),y=window.location.pathname.split("/")[3],F=()=>h(!0),T=()=>h(!1),$=B("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});async function S(n){try{u(!0);const t=new FormData;t.append("lesson_id",k.id),t.append("module_id",y),t.append("questions",JSON.stringify(s.questions)),t.append("file",s.file),t.append("direction",s.direction),t.append("exam_type",s.exam_type),t.append("type","assessment");const l=await v.dispatch(M(t));l.status==200?(v.dispatch(A(y)),u(!1),h(!1),i({exam_type:"",direction:"",file:"",questions:[{question:"",answer_key:"",file:""}]})):(u(!1),C(l.response.data.errors)),console.log("datass",s)}catch{u(!1)}}const p=(n,t,l)=>{const o=[...s.questions];o[n][t]=l,i({...s,questions:o})};return console.log("da",s),e.jsxs("div",{children:[e.jsx(m,{variant:"contained",color:"warning",onClick:F,children:"CREATE ASSESSMENT"}),e.jsx(D,{open:q,onClose:T,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx(Q,{sx:U,children:e.jsxs("div",{className:"h-[88vh] overflow-auto",children:[e.jsx("div",{className:"flex items-center justify-center text-3xl font-black",children:"Assessment"}),e.jsxs("div",{className:"overflow  w-full flex gap-4 flex-col",children:[e.jsxs(j,{fullWidth:!0,error:!!(a!=null&&a.exam_type),children:[e.jsx(E,{id:"exam-type-select-label",children:"Exam Type"}),e.jsxs(O,{labelId:"exam-type-select-label",id:"exam-type-select",name:"exam_type",label:"Exam Type",value:s.exam_type??"",onChange:n=>i({...s,[n.target.name]:n.target.value}),children:[e.jsx(r,{value:"",disabled:!0,children:"Select Exam Type"}),e.jsx(r,{value:"Fill In The Blank",children:"Fill In The Blank"}),e.jsx(r,{value:"Multiple Choice",children:"Multiple Choice"}),e.jsx(r,{value:"Matching",children:"Matching"}),e.jsx(r,{value:"Identification",children:"Identification"}),e.jsx(r,{value:"True Or False",children:"True Or False"})]}),(a==null?void 0:a.type)&&e.jsx(g,{children:a.type})]}),e.jsxs(m,{component:"label",role:void 0,variant:"contained",startIcon:s!=null&&s.file?e.jsxs(e.Fragment,{children:[e.jsx(R,{}),"UPLOADED"]}):e.jsx(L,{}),children:[s!=null&&s.file?(w=s==null?void 0:s.file)==null?void 0:w.name:"Upload files",e.jsx($,{name:"file",type:"file",onChange:n=>i({...s,[n.target.name]:n.target.files[0]}),accept:"image/*"})]}),e.jsxs("div",{className:"bg-white ",children:[(a==null?void 0:a.direction)&&e.jsx("div",{className:"text-red-600",children:a==null?void 0:a.direction}),e.jsx("div",{className:"text-black p-3 font-black",children:"Direction"}),e.jsx(I,{theme:"snow",className:"text-black  h-52",onChange:n=>i({...s,direction:n})})]}),e.jsx("div",{className:"mt-10"}),e.jsx("div",{className:"flex w-full items-center justify-end",children:s.exam_type&&e.jsx(m,{className:"w-36",variant:"contained",autoFocus:!0,onClick:()=>i({...s,questions:[...s.questions,{question:"",answer:"",answer_key:""}]}),children:"add fields"})}),s.questions.map((n,t)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 justify-end mt-2",children:t!=0&&e.jsx(m,{variant:"outlined",color:"error",onClick:()=>{const l=[...s.questions];l.splice(t,1),i({...s,questions:l})},children:"Delete"})}),s.exam_type==="True Or False"&&e.jsx("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx(f,{multiline:!0,rows:3,onChange:l=>{const o=[...s.questions];o[t].question=l.target.value,i({...s,questions:o})},error:!!(a!=null&&a.question),helperText:(a==null?void 0:a.question)??"",value:n.question,name:`question-${t}`,type:"text",label:`Question ${t+1}`,variant:"outlined",className:"w-full"}),e.jsxs(j,{children:[e.jsx(b,{id:`answer-key-label-${t}`,children:"Answer Key"}),e.jsxs(_,{row:!0,value:n.answer_key,onChange:l=>{const o=[...s.questions];o[t].answer_key=l.target.value,i({...s,questions:o})},"aria-labelledby":`answer-key-label-${t}`,name:`answer_key-${t}`,children:[e.jsx(c,{value:"true",control:e.jsx(d,{}),label:"True"}),e.jsx(c,{value:"false",control:e.jsx(d,{}),label:"False"})]})]})]})},t),(s.exam_type=="Fill In The Blank"||s.exam_type=="Matching"||s.exam_type=="Identification")&&e.jsx("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:e.jsxs("div",{className:"flex flex-row gap-4 w-full border-b ",children:[e.jsx(f,{multiline:!0,rows:2,onChange:l=>p(t,"question",l.target.value),value:n.question,label:`Question ${t+1}`,variant:"outlined",className:"w-full"}),e.jsx(f,{multiline:!0,rows:2,onChange:l=>p(t,"answer_key",l.target.value),value:n.answer_key,label:`Answer Key ${t+1}`,variant:"outlined",className:"w-full"})]},t)}),s.exam_type=="Multiple Choice"&&e.jsxs("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:[e.jsx("div",{className:"flex items-center justify-between w-full",children:e.jsxs(j,{error:!!(a!=null&&a[`answer_key-${t}`]),children:[e.jsxs(b,{id:`answer-key-${t}`,children:["Answer Key ",t+1]}),e.jsxs(_,{row:!0,"aria-labelledby":`answer-key-${t}`,name:`answer_key-${t}`,value:n.answer_key,onChange:l=>p(t,"answer_key",l.target.value),children:[e.jsx(c,{value:"A",control:e.jsx(d,{}),label:"A"}),e.jsx(c,{value:"B",control:e.jsx(d,{}),label:"B"}),e.jsx(c,{value:"C",control:e.jsx(d,{}),label:"C"}),e.jsx(c,{value:"D",control:e.jsx(d,{}),label:"D"})]}),(a==null?void 0:a[`answer_key-${t}`])&&e.jsx(g,{children:a[`answer_key-${t}`]})]})}),e.jsx(f,{multiline:!0,rows:3,value:n.question,name:`question-${t}`,type:"text",label:`Question ${t+1}`,variant:"outlined",className:"w-full",error:!!(a!=null&&a[`question-${t}`]),helperText:(a==null?void 0:a[`question-${t}`])??"",onChange:l=>p(t,"question",l.target.value)})]},t)]}))]}),e.jsx("div",{className:"mt-5",children:e.jsx(m,{className:"w-full  ",disabled:N,variant:"contained",autoFocus:!0,onClick:S,children:"SUBMIT"})})]})})})]})}export{De as default};
