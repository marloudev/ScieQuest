import{r as x,j as e,s as S}from"./app-B0RjZSg2.js";import{R as I}from"./index-DX4QNWOF.js";/* empty css                   */import{a as M}from"./lesson-thunk-BgX9n_rR.js";import{I as E}from"./InputLabel-Ceqqn0q2.js";import{s as A}from"./DefaultPropsProvider-cAg0yDRQ.js";import{B as m}from"./Button-DMHQ_h2q.js";import{M as B}from"./Modal-BrkQ2u-T.js";import{B as D}from"./Box-CZ-Meiud.js";import{F as j,a as w}from"./FormLabel-Du56G9nH.js";import{S as Q,F as v,T as f}from"./TextField-j-BuzoAL.js";import{M as r}from"./MenuItem-CXyf7JyR.js";import{C as O}from"./Check-D-u4uSZ5.js";import{C as R}from"./CloudUpload-BymYD7aE.js";import{R as b,F as c,a as d}from"./RadioGroup-De-b1o20.js";import"./booklet-slice-CSjf_QBr.js";import"./lesson-service-Cl-bbIHI.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./ButtonBase-Dzy-PJmF.js";import"./emotion-react.browser.esm-yx1_5Ihu.js";import"./TransitionGroupContext-B_jZsxXj.js";import"./useId-BQQ_4p0p.js";import"./CircularProgress-CvvJyaZM.js";import"./ownerWindow-HkKU3E4x.js";import"./ownerDocument-DW-IO8s5.js";import"./resolveComponentProps-DLveznFm.js";import"./useSlot-ocmg8nsp.js";import"./useTheme-DVguROhs.js";import"./utils-DHMNgMMm.js";import"./Portal-2oG46KaJ.js";import"./extendSxProp-CaaPcGJ4.js";import"./utils-Dokm4PuF.js";import"./isMuiElement-C6pPV54m.js";import"./index-Ch0VThUL.js";import"./Popover-BG2Phwcn.js";import"./isHostComponent-DVu5iVWx.js";import"./Paper-Ctu7-5wo.js";import"./debounce-Be36O1Ab.js";import"./Grow-BcriW1De.js";import"./useSlotProps-1k7ezqIT.js";import"./useControlled-CEd2P6cA.js";import"./createSvgIcon-ccd3OI1v.js";import"./InputBase-D3HXXSdc.js";import"./index-BBUu2hvH.js";import"./listItemTextClasses-BEPRI_Z8.js";import"./Typography-u4vuA9EV.js";const L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1e3,bgcolor:"background.paper",boxShadow:24,p:4};function Ee({datas:g}){var y;const[_,h]=x.useState(!1),[a,k]=x.useState({}),[q,u]=x.useState(!1),[t,i]=x.useState({exam_type:"",direction:"",file:"",questions:[{question:"",answer_key:""}]}),C=window.location.pathname.split("/")[3],N=()=>h(!0),F=()=>h(!1),T=A("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});async function $(n){try{u(!0);const s=new FormData;s.append("lesson_id",g.id),s.append("module_id",C),s.append("questions",JSON.stringify(t.questions)),s.append("file",t.file),s.append("direction",t.direction),s.append("exam_type",t.exam_type),s.append("type","assessment");const l=await S.dispatch(M(s));l.status==200?(u(!1),h(!1),i({exam_type:"",direction:"",file:"",questions:[{question:"",answer_key:"",file:""}]})):(u(!1),k(l.response.data.errors)),console.log("datass",t)}catch{u(!1)}}const p=(n,s,l)=>{const o=[...t.questions];o[n][s]=l,i({...t,questions:o})};return console.log("da",t),e.jsxs("div",{children:[e.jsx(m,{variant:"contained",color:"warning",onClick:N,children:"CREATE ASSESSMENT"}),e.jsx(B,{open:_,onClose:F,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx(D,{sx:L,children:e.jsxs("div",{className:"h-[88vh] overflow-auto",children:[e.jsx("div",{className:"flex items-center justify-center text-3xl font-black",children:"Assessment"}),e.jsxs("div",{className:"overflow  w-full flex gap-4 flex-col",children:[e.jsxs(j,{fullWidth:!0,error:!!(a!=null&&a.exam_type),children:[e.jsx(E,{id:"exam-type-select-label",children:"Exam Type"}),e.jsxs(Q,{labelId:"exam-type-select-label",id:"exam-type-select",name:"exam_type",label:"Exam Type",value:t.exam_type??"",onChange:n=>i({...t,[n.target.name]:n.target.value}),children:[e.jsx(r,{value:"",disabled:!0,children:"Select Exam Type"}),e.jsx(r,{value:"Fill In The Blank",children:"Fill In The Blank"}),e.jsx(r,{value:"Multiple Choice",children:"Multiple Choice"}),e.jsx(r,{value:"Matching",children:"Matching"}),e.jsx(r,{value:"Identification",children:"Identification"}),e.jsx(r,{value:"True Or False",children:"True Or False"})]}),(a==null?void 0:a.type)&&e.jsx(v,{children:a.type})]}),e.jsxs(m,{component:"label",role:void 0,variant:"contained",startIcon:t!=null&&t.file?e.jsxs(e.Fragment,{children:[e.jsx(O,{}),"UPLOADED"]}):e.jsx(R,{}),children:[t!=null&&t.file?(y=t==null?void 0:t.file)==null?void 0:y.name:"Upload files",e.jsx(T,{name:"file",type:"file",onChange:n=>i({...t,[n.target.name]:n.target.files[0]}),accept:"image/*"})]}),e.jsxs("div",{className:"bg-white ",children:[(a==null?void 0:a.direction)&&e.jsx("div",{className:"text-red-600",children:a==null?void 0:a.direction}),e.jsx("div",{className:"text-black p-3 font-black",children:"Direction"}),e.jsx(I,{theme:"snow",className:"text-black  h-52",onChange:n=>i({...t,direction:n})})]}),e.jsx("div",{className:"mt-10"}),e.jsx("div",{className:"flex w-full items-center justify-end",children:t.exam_type&&e.jsx(m,{className:"w-36",variant:"contained",autoFocus:!0,onClick:()=>i({...t,questions:[...t.questions,{question:"",answer:"",answer_key:""}]}),children:"add fields"})}),t.questions.map((n,s)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 justify-end mt-2",children:s!=0&&e.jsx(m,{variant:"outlined",color:"error",onClick:()=>{const l=[...t.questions];l.splice(s,1),i({...t,questions:l})},children:"Delete"})}),t.exam_type==="True Or False"&&e.jsx("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx(f,{multiline:!0,rows:3,onChange:l=>{const o=[...t.questions];o[s].question=l.target.value,i({...t,questions:o})},error:!!(a!=null&&a.question),helperText:(a==null?void 0:a.question)??"",value:n.question,name:`question-${s}`,type:"text",label:`Question ${s+1}`,variant:"outlined",className:"w-full"}),e.jsxs(j,{children:[e.jsx(w,{id:`answer-key-label-${s}`,children:"Answer Key"}),e.jsxs(b,{row:!0,value:n.answer_key,onChange:l=>{const o=[...t.questions];o[s].answer_key=l.target.value,i({...t,questions:o})},"aria-labelledby":`answer-key-label-${s}`,name:`answer_key-${s}`,children:[e.jsx(c,{value:"true",control:e.jsx(d,{}),label:"True"}),e.jsx(c,{value:"false",control:e.jsx(d,{}),label:"False"})]})]})]})},s),(t.exam_type=="Fill In The Blank"||t.exam_type=="Matching"||t.exam_type=="Identification")&&e.jsx("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:e.jsxs("div",{className:"flex flex-row gap-4 w-full border-b ",children:[e.jsx(f,{multiline:!0,rows:2,onChange:l=>p(s,"question",l.target.value),value:n.question,label:`Question ${s+1}`,variant:"outlined",className:"w-full"}),e.jsx(f,{multiline:!0,rows:2,onChange:l=>p(s,"answer_key",l.target.value),value:n.answer_key,label:`Answer Key ${s+1}`,variant:"outlined",className:"w-full"})]},s)}),t.exam_type=="Multiple Choice"&&e.jsxs("div",{className:"flex flex-col gap-4 w-full border-b pb-4",children:[e.jsx("div",{className:"flex items-center justify-between w-full",children:e.jsxs(j,{error:!!(a!=null&&a[`answer_key-${s}`]),children:[e.jsxs(w,{id:`answer-key-${s}`,children:["Answer Key ",s+1]}),e.jsxs(b,{row:!0,"aria-labelledby":`answer-key-${s}`,name:`answer_key-${s}`,value:n.answer_key,onChange:l=>p(s,"answer_key",l.target.value),children:[e.jsx(c,{value:"A",control:e.jsx(d,{}),label:"A"}),e.jsx(c,{value:"B",control:e.jsx(d,{}),label:"B"}),e.jsx(c,{value:"C",control:e.jsx(d,{}),label:"C"}),e.jsx(c,{value:"D",control:e.jsx(d,{}),label:"D"})]}),(a==null?void 0:a[`answer_key-${s}`])&&e.jsx(v,{children:a[`answer_key-${s}`]})]})}),e.jsx(f,{multiline:!0,rows:3,value:n.question,name:`question-${s}`,type:"text",label:`Question ${s+1}`,variant:"outlined",className:"w-full",error:!!(a!=null&&a[`question-${s}`]),helperText:(a==null?void 0:a[`question-${s}`])??"",onChange:l=>p(s,"question",l.target.value)})]},s)]}))]}),e.jsx("div",{className:"mt-5",children:e.jsx(m,{className:"w-full  ",disabled:q,variant:"contained",autoFocus:!0,onClick:$,children:"SUBMIT"})})]})})})]})}export{Ee as default};
